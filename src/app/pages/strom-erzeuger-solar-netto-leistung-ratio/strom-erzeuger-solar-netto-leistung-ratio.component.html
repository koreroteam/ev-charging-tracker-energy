<head>
 
  <link href="https://db.onlinewebfonts.com/c/dba3e777ccc7fa4a896dcf7e7f5b3bfb?family=Biome+W01+Regular" rel="stylesheet">
 
</head>

  
<div></div>
<nb-card>


  <nb-card-header style="font-family: 'Biome W01 Regular', sans-serif;">
    Filter
    <div class="zipcode-filter" >
      <br>
      <input nbInput [(ngModel)]="inputRegierungsbezirk"  style="font-family: 'Biome W01 Regular', sans-serif;" type="text" placeholder="Gebiet eingeben" (input)="onInputChange($event)" />&nbsp;
      <button nbButton  style="font-family: 'Biome W01 Regular', sans-serif;" shape="round" >Suche</button>
    </div>
    <br>

    <div class="slider-container">
      <input type="range" [(ngModel)]="sliderValue" (change)="onSliderChange($event.target.value)" min="0" max="15" step="1" class="mx-2 time-slider" id="timeSlider">
      <div class="time-labels">
          <span *ngFor="let time of times">{{ time }}</span>
      </div>
  </div>


    <!-- <nb-select [(ngModel)]="selectedTime" (selectedChange)="onTimeSelected($event)" class="mx-2" id='selectedFilter'>


      <nb-option value="10:00">10:00</nb-option>
      <nb-option value="10:15">10:15</nb-option>
      <nb-option value="10:30">10:30</nb-option>
      <nb-option value="10:45">10:45</nb-option>
      <nb-option value="11:00">11:00</nb-option>

      <nb-option value="11:15">11:15</nb-option>
      <nb-option value="11:30">11:30</nb-option>
      <nb-option value="11:45">11:45</nb-option>

      <nb-option value="12:00">12:00</nb-option>
      <nb-option value="12:15">12:15</nb-option>
      <nb-option value="12:30">12:30</nb-option>
      <nb-option value="12:45">12:45</nb-option>

      <nb-option value="13:00">13:00</nb-option>
      <nb-option value="13:15">13:15</nb-option>
      <nb-option value="13:30">13:30</nb-option>
      <nb-option value="13:45">13:45</nb-option>
      <nb-option value="13:00">14:00</nb-option>

    
  </nb-select> -->
    
  <!-- <nb-option value="country">Land</nb-option> -->
  <!-- <button (click)="startMapAutoRefresh()">Start Auto Refresh</button> -->

    
  <br>
Ansicht:&nbsp; &nbsp;
<!-- <nb-select [(selected)]="zipCodeFilterOption">
  <nb-option value="regierungsbezirke" (click)="switchMap('regierungsbezirke')">Regierungsbezirke</nb-option>
  <nb-option value="kreise" (click)="switchMap('kreise')">Landkreise</nb-option>
  <nb-option value="all" (click)="switchMap('all')">5-stellig</nb-option>
  <nb-option value="twoDigits" (click)="switchMap('2-stellig')">2-stellig</nb-option>
</nb-select> -->



</nb-card-header>
</nb-card>
<br>

<div class="row" >
  <div class="col-12">
    <p  style="font-family: 'Biome W01 Regular', sans-serif;">Heat Map: Ratio von Bedarf und Netto Produktion Solar</p>
          <span class="float-right px-2"><button nbButton  style="font-family: 'Biome W01 Regular', sans-serif;" size="small" status="danger" shape="round"
                  (click)='downloadImage("jpeg")'>JPEG</button></span>
          <span class="float-right"><button nbButton style="font-family: 'Biome W01 Regular', sans-serif;" size="small" status="danger" shape="round"
                  (click)='downloadImage("png")'>png</button></span>
                  <span class="float-right" >
                    <button nbButton  style="font-family: 'Biome W01 Regular', sans-serif;"*ngIf="zipCodeFilterOption === 'all'" size="small" status="danger" shape="round" (click)="downloadCSV('5-stellig-PLZ.csv', popupDataZipCode,'5-stellig-PLZ')">
                      CSV-Export
                    </button>&nbsp;
                  </span>
               
  </div>
</div>
<br>
<div class="map-container" id="print">
    <div class="map-frame">
        <div id="heatMapContainerSolarLeistungRatio"></div>
       
          <div class="legend-container"   #draggableLegend>
            <div *ngIf="zipCodeFilterOption === 'all'" #legend id="legend" class="legend">
            <p><b>Ratio zwischen Strombedarf und -Erzeugung
              <br>(Nettoproduktion PV) je PLZ:</b></p>
              <h1>{{   ''+selectedTime +'' }}</h1>
                <div class="legend-item">
                <div class="color" style="background-color: rgba(255, 255, 255, 1)"></div>
                <div class="label">untere 20 %</div>
              </div>
              <div class="legend-item">
                <div class="color" style="background-color: rgba(76, 153, 0)"></div>
                <div class="label">21-40 %</div>
              </div>
              <div class="legend-item">
                <div class="color" style="background-color: rgba(0, 135, 127)"></div>
                <div class="label">41-60 %</div>
              </div>
              <div class="legend-item">
                <div class="color" style="background-color: rgba(0, 111, 122)"></div>
                <div class="label">61-80 %</div>
              </div>
              <div class="legend-item">
                <div class="color" style="background-color: rgba(0, 76, 76)"></div>
                <div class="label">obere 20 %</div>
              </div>
              
            </div>

            

          
